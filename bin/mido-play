#!/usr/bin/env python
"""                                                                            
Play MIDI file on output port.

Example:

    mido-play some_file.mid

Todo:

  - do proper argument parsing
  - add option for output port
  - add option for printing messages
"""
from __future__ import print_function
import sys
import mido
from mido.midifiles import MidiFile

with mido.open_output() as output:
    output.reset()
    try:
        print('Using {!r}'.format(output))
        for filename in sys.argv[1:]:
            with MidiFile(filename) as midi_file:
                print('Tracks:')
                for i, track in enumerate(midi_file.tracks):
                    print('  {:2d}: {!r}'.format(i, track.name.strip()))

                for message in midi_file:
                    # print(message)
                    output.send(message)
    except KeyboardInterrupt:
        pass
    finally:
        print()
        output.reset()
