#!/usr/bin/env python3
"""                                                                            
Play MIDI file on output port.

Example:

    mido-play some_file.mid

Todo:

  - do proper argument parsing
  - add option for output port
  - add option for printing messages
"""

import sys
import mido
from mido.midifiles import MidiFile

with mido.open_output('SD-20 Part A') as output:
    output.reset()
    try:
        print('Using {!r}'.format(output))
        with MidiFile(sys.argv[1]) as midi_file:
            print('Tracks:')
            for i, track in enumerate(midi_file.tracks):
                print('  {:2d}: {!r}'.format(i, track.name.strip()))

            for message in midi_file:
                # print(message)
                output.send(message)
    except KeyboardInterrupt:
        pass
    finally:
        print()
        output.reset()
